<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCR Admin Dashboard - Content Management</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #3498db;
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            padding: 20px;
        }

        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            overflow: hidden;
        }

        .admin-header {
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .admin-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;

        }

        .admin-header h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .admin-header p {
            opacity: 0.8;
            font-size: 16px;
        }

        .logout-btn {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.313);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(0, 0, 0, 0.521);
            transform: translateY(-2px);
        }

        .form-container {
            padding: 40px;
        }

        .tab-navigation {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid #e1e5e9;
            overflow-x: auto;
        }

        .tab-btn {
            padding: 15px 25px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 500;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-btn:hover {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 4px solid #667eea;
        }

        .form-section h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: 600;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
            font-size: 14px;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .staff-member {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
        }

        .staff-member h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e1e5e9;
        }

        .remove-staff {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #e74c3c;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .remove-staff:hover {
            background: #c0392b;
            transform: scale(1.1);
        }

        .add-staff-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .add-staff-btn:hover {
            background: #229954;
            transform: translateY(-2px);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e1e5e9;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }

        .btn-preview {
            background: #3498db;
            color: white;
        }

        .btn-preview:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }

        .website-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .website-link {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            padding: 15px;
            position: relative;
        }

        .website-link input[type="text"] {
            margin-bottom: 10px;
        }

        .website-link input[type="url"] {
            font-size: 12px;
        }

        .remove-link-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            margin-top: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .remove-link-btn:hover {
            background: #c0392b;
        }

        .notice-area {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
        }

        .notice-area textarea {
            background: white;
        }

        @media (max-width: 768px) {
            .admin-container {
                margin: 10px;
                border-radius: 15px;
            }

            .form-container {
                padding: 20px;
            }

            .admin-header {
                padding: 20px;
            }

            .logout-btn {
                position: static;
                margin-top: 15px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .tab-navigation {
                flex-wrap: wrap;
            }
        }

        .logo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: 600;
        }
    </style>
</head>

<body>
    <div class="admin-container">
        <div class="admin-header">
            <button class="logout-btn" onclick="logout()">Logout</button>
            <img src="images/indian_railways_logo.png" class="logo">
            <h1>North Central Railway</h1>
            <p>Admin Dashboard - Content Management System</p>
        </div>

        <div class="form-container">
            <div class="success-message" id="successMessage">
                Changes saved successfully! Your website has been updated.
            </div>

            <div class="tab-navigation">
                <button class="tab-btn active" onclick="showTab('general', event)">General Info</button>
                <button class="tab-btn" onclick="showTab('staff', event)">Staff Management</button>
                <button class="tab-btn" onclick="showTab('links', event)">Website Links</button>
                <button class="tab-btn" onclick="showTab('notices', event)">Notices & Updates</button>
            </div>

            <form id="websiteForm">
                <!-- General Information Tab -->
                <div class="tab-content active" id="general">
                    <div class="form-section">
                        <h3>Department Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="deptTitle">Department Title</label>
                                <input type="text" id="deptTitle" name="deptTitle" value="">
                            </div>
                            <div class="form-group">
                                <label for="division">Division</label>
                                <input type="text" id="division" name="division" value="Agra Division">

                                <input type="hidden" id="division" name="division" value="division">
                            </div>
                        </div>
                    </div>


                </div>

                <!-- Staff Management Tab -->
                <div class="tab-content" id="staff">
                    <div class="form-section">
                        <h3>Senior Management</h3>
                        <div class="staff-member">
                            <h4>Sr. DFM (Senior Divisional Finance Manager)</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Name</label>
                                    <input type="text" name="srdfm_name" value="">
                                </div>
                                <div class="form-group">
                                    <label>Phone</label>
                                    <input type="tel" name="srdfm_phone" value="">
                                </div>
                            </div>

                        </div>

                        <div class="staff-member">
                            <h4>DFM (Divisional Finance Manager)</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Name</label>
                                    <input type="text" name="dfm_name" value="VACANT">
                                </div>
                                <div class="form-group">
                                    <label>Phone</label>
                                    <input type="tel" name="dfm_phone" value="">
                                </div>
                            </div>

                        </div>

                    </div>

                    <div class="form-section">
                        <h3>Assistant Divisional Finance Managers</h3>
                        <div id="adfmContainer">
                            <div class="staff-member">
                                <button type="button" class="remove-staff" onclick="removeStaff(this)">Ã—</button>
                                <h4>ADFM-I</h4>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Name</label>
                                        <input type="text" name="adfm_name[]" value="Sh. Bhagwan Singh Pippal">
                                    </div>
                                    <div class="form-group">
                                        <label>Phone</label>
                                        <input type="tel" name="adfm_phone[]" value="9760536102">
                                    </div>
                                </div>
                                >
                            </div>

                            <div class="staff-member">
                                <button type="button" class="remove-staff" onclick="removeStaff(this)">Ã—</button>
                                <h4>ADFM-II</h4>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Name</label>
                                        <input type="text" name="adfm_name[]" value="Sh. Mithlesh Kumar Meena">
                                    </div>
                                    <div class="form-group">
                                        <label>Phone</label>
                                        <input type="tel" name="adfm_phone[]" value="9760536103">
                                    </div>
                                </div>

                            </div>

                            <div class="staff-member">
                                <button type="button" class="remove-staff" onclick="removeStaff(this)">Ã—</button>
                                <h4>ADFM-III</h4>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Name</label>
                                        <input type="text" name="adfm_name[]" value="VACANT">
                                    </div>
                                    <div class="form-group">
                                        <label>Phone</label>
                                        <input type="tel" name="adfm_phone[]" value="">
                                    </div>
                                </div>

                            </div>
                        </div>
                        <button type="button" class="add-staff-btn" onclick="addADFM()">+ Add ADFM</button>
                    </div>
                    <div class="form-section">
                        <h3>Sr Section Officer Management</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sso_sanctioned_strength">Sanctioned Strength</label>
                                <input type="number" id="sso_sanctioned_strength" name="sso_sanctioned_strength" />
                            </div>
                            <div class="form-group">
                                <label for="sso_men_on_roll">Men-On-Roll</label>
                                <input type="number" id="sso_men_on_roll" name="sso_men_on_roll" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="sso_duties">Duties and Responsibilities (HTML allowed)</label>
                            <textarea id="sso_duties" name="sso_duties" rows="6"
                                placeholder="Enter HTML content for duties..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>SSO Members</label>
                            <div id="ssoMembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addSSOMember()">+ Add Member</button>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>Sr ISO Management</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="iso_sanctioned_strength">Sanctioned Strength</label>
                                <input type="number" id="iso_sanctioned_strength" name="iso_sanctioned_strength" />
                            </div>
                            <div class="form-group">
                                <label for="iso_men_on_roll">Men-On-Roll</label>
                                <input type="number" id="iso_men_on_roll" name="iso_men_on_roll" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="iso_duties">Duties and Responsibilities (HTML allowed)</label>
                            <textarea id="iso_duties" name="iso_duties" rows="6"
                                placeholder="Enter HTML content for duties..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>ISO Members</label>
                            <div id="isoMembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addISOMember()">+ Add Member</button>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>SE/IT Management</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="se_sanctioned_strength">Sanctioned Strength</label>
                                <input type="number" id="se_sanctioned_strength" name="se_sanctioned_strength" />
                            </div>
                            <div class="form-group">
                                <label for="se_men_on_roll">Men-On-Roll</label>
                                <input type="number" id="se_men_on_roll" name="se_men_on_roll" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="se_duties">Duties and Responsibilities (HTML allowed)</label>
                            <textarea id="se_duties" name="se_duties" rows="3"
                                placeholder="Enter HTML content for duties..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>SE/IT Members</label>
                            <div id="seMembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addSEMember()">+ Add Member</button>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>JE/IT Section</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="je_sanctioned_strength">Sanctioned Strength</label>
                                <input type="number" name="je_sanctioned_strength"
                                    placeholder="Enter sanctioned strength" />
                            </div>

                            <div class="form-group">
                                <label for="je_men_on_roll">Men-On-Roll</label>
                                <input type="number" name="je_men_on_roll" placeholder="Enter men-on-roll" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Duties & Responsibilities</label>
                            <textarea name="je_duties" placeholder="Enter duties here..." rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Members</label>
                            <div id="jeMembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addJEMember()">+ Add Member</button>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>SR.AA / AA Section</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Sanctioned Strength</label>
                                <input type="number" name="aa_sanctioned_strength"
                                    placeholder="Enter sanctioned strength" />
                            </div>

                            <div class="form-group">
                                <label>Men On Roll</label>
                                <input type="number" name="aa_men_on_roll" placeholder="Enter men-on-roll" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Duties & Responsibilities</label>
                            <textarea name="aa_duties" placeholder="Enter duties here..." rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Members</label>
                            <div id="aaMembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addAAMember()">+ Add Member</button>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>Sr.SV Section</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Sanctioned Strength</label>
                                <input type="number" name="sv_sanctioned_strength"
                                    placeholder="Enter sanctioned strength" />
                            </div>

                            <div class="form-group">
                                <label>Men On Roll</label>
                                <input type="number" name="sv_men_on_roll" placeholder="Enter men-on-roll" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Duties & Responsibilities</label>
                            <textarea name="sv_duties" placeholder="Enter duties here..." rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Members</label>
                            <div id="svMembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addSVMember()">+ Add Member</button>
                        </div>
                    </div>


                    <div class="form-section">
                        <h3>A.S.V Section</h3>
                        <div class="form-row">

                            <div class="form-group">
                                <label>Sanctioned Strength</label>
                                <input type="number" name="asv_sanctioned_strength"
                                    placeholder="Enter sanctioned strength" />
                            </div>

                            <div class="form-group">
                                <label>Men On Roll</label>
                                <input type="number" name="asv_men_on_roll" placeholder="Enter men-on-roll" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Duties & Responsibilities</label>
                            <textarea name="asv_duties" placeholder="Enter duties here..." rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Members</label>
                            <div id="asvMembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addASVMember()">+ Add Member</button>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>Steno-I Section</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Sanctioned Strength</label>
                                <input type="number" name="steno1_sanctioned_strength"
                                    placeholder="Enter sanctioned strength" />
                            </div>

                            <div class="form-group">
                                <label>Men On Roll</label>
                                <input type="number" name="steno1_men_on_roll" placeholder="Enter men-on-roll" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Duties & Responsibilities</label>
                            <textarea name="steno1_duties" placeholder="Enter duties here..." rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Members</label>
                            <div id="steno1MembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addSteno1Member()">+ Add
                                Member</button>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>Steno-II Section</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Sanctioned Strength</label>
                                <input type="number" name="steno2_sanctioned_strength"
                                    placeholder="Enter sanctioned strength" />
                            </div>

                            <div class="form-group">
                                <label>Men On Roll</label>
                                <input type="number" name="steno2_men_on_roll" placeholder="Enter men-on-roll" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Duties & Responsibilities</label>
                            <textarea name="steno2_duties" placeholder="Enter duties here..." rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Members</label>
                            <div id="steno2MembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addSteno2Member()">+ Add
                                Member</button>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>JR AA Section</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Sanctioned Strength</label>
                                <input type="number" name="jraa_sanctioned_strength"
                                    placeholder="Enter sanctioned strength" />
                            </div>

                            <div class="form-group">
                                <label>Men On Roll</label>
                                <input type="number" name="jraa_men_on_roll" placeholder="Enter men-on-roll" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Duties & Responsibilities</label>
                            <textarea name="jraa_duties" placeholder="Enter duties here..." rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Members</label>
                            <div id="jraaMembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addJRAAMember()">+ Add Member</button>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>TADK Section</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Sanctioned Strength</label>
                                <input type="number" name="tadk_sanctioned_strength"
                                    placeholder="Enter sanctioned strength" />
                            </div>

                            <div class="form-group">
                                <label>Men On Roll</label>
                                <input type="number" name="tadk_men_on_roll" placeholder="Enter men-on-roll" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Duties & Responsibilities</label>
                            <textarea name="tadk_duties" placeholder="Enter duties here..." rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Members</label>
                            <div id="tadkMembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addTADKMember()">+ Add Member</button>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>OAA Section</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Sanctioned Strength</label>
                                <input type="number" name="oaa_sanctioned_strength"
                                    placeholder="Enter sanctioned strength" />
                            </div>

                            <div class="form-group">
                                <label>Men On Roll</label>
                                <input type="number" name="oaa_men_on_roll" placeholder="Enter men-on-roll" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Duties & Responsibilities</label>
                            <textarea name="oaa_duties" placeholder="Enter duties here..." rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Members</label>
                            <div id="oaaMembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addOAAMember()">+ Add Member</button>
                        </div>
                    </div>
                    <div class="form-section">
                        <h3>A/CS/CLERK Section</h3>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Sanctioned Strength</label>
                                <input type="number" name="clerk_sanctioned_strength"
                                    placeholder="Enter sanctioned strength" />
                            </div>

                            <div class="form-group">
                                <label>Men On Roll</label>
                                <input type="number" name="clerk_men_on_roll" placeholder="Enter men-on-roll" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Duties & Responsibilities</label>
                            <textarea name="clerk_duties" placeholder="Enter duties here..." rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Members</label>
                            <div id="clerkMembersContainer"></div>
                            <button type="button" class="add-staff-btn" onclick="addClerkMember()">+ Add Member</button>
                        </div>
                    </div>


                </div>

                <!-- Website Links Tab -->
                <<div class="tab-content" id="links">
                    <div class="form-section">
                        <h3>Frequently Used Websites</h3>
                        <div class="website-links" id="websiteLinksContainer">
                            <div class="website-link">
                                <input type="text" placeholder="Website Name" value="IPAS AIMS" name="website_name[]">
                                <input type="url" placeholder="Website URL"
                                    value="https://aims.indianrailways.gov.in/IPAS/LoginForms/Login.jsp"
                                    name="website_url[]">
                                <button type="button" class="remove-link-btn"
                                    onclick="removeWebsiteLink(this)">Remove</button>
                            </div>
                            <div class="website-link">
                                <input type="text" placeholder="Website Name" value="E-Office" name="website_name[]">
                                <input type="url" placeholder="Website URL"
                                    value="https://parichay.nic.in/pnv1/assets/login?sid=eOfficeRailNC"
                                    name="website_url[]">
                                <button type="button" class="remove-link-btn"
                                    onclick="removeWebsiteLink(this)">Remove</button>
                            </div>
                            <div class="website-link">
                                <input type="text" placeholder="Website Name" value="HRMS" name="website_name[]">
                                <input type="url" placeholder="Website URL"
                                    value="https://hrms.indianrail.gov.in/HRMS/login" name="website_url[]">
                                <button type="button" class="remove-link-btn"
                                    onclick="removeWebsiteLink(this)">Remove</button>
                            </div>
                            <div class="website-link">
                                <input type="text" placeholder="Website Name" value="IREPS" name="website_name[]">
                                <input type="url" placeholder="Website URL" value="https://www.ireps.gov.in/"
                                    name="website_url[]">
                                <button type="button" class="remove-link-btn"
                                    onclick="removeWebsiteLink(this)">Remove</button>
                            </div>
                            <!-- New Websites Added -->
                            <div class="website-link">
                                <input type="text" placeholder="Website Name" value="IR-WCMS" name="website_name[]">
                                <input type="url" placeholder="Website URL" value="https://sso.indianrailways.gov.in/"
                                    name="website_url[]">
                                <button type="button" class="remove-link-btn"
                                    onclick="removeWebsiteLink(this)">Remove</button>
                            </div>
                            <div class="website-link">
                                <input type="text" placeholder="Website Name" value="e-Inspection"
                                    name="website_name[]">
                                <input type="url" placeholder="Website URL"
                                    value="https://einspection.indianrailways.gov.in/" name="website_url[]">
                                <button type="button" class="remove-link-btn"
                                    onclick="removeWebsiteLink(this)">Remove</button>
                            </div>
                            <div class="website-link">
                                <input type="text" placeholder="Website Name" value="UDM" name="website_name[]">
                                <input type="url" placeholder="Website URL" value="https://www.ireps.gov.in/iMMS/logon"
                                    name="website_url[]">
                                <button type="button" class="remove-link-btn"
                                    onclick="removeWebsiteLink(this)">Remove</button>
                            </div>
                            <div class="website-link">
                                <input type="text" placeholder="Website Name" value="GOV MAIL" name="website_name[]">
                                <input type="url" placeholder="Website URL" value="mailto:email.gov.in"
                                    name="website_url[]">
                                <button type="button" class="remove-link-btn"
                                    onclick="removeWebsiteLink(this)">Remove</button>
                            </div>
                        </div>
                        <button type="button" class="add-staff-btn" onclick="addWebsiteLink()">+ Add Website
                            Link</button>
                    </div>
        </div>


        <div class="form-section">
            <h3>Social Media Links</h3>
            <div class="form-row">
                <div class="form-group">
                    <label>Facebook URL</label>
                    <input type="url" name="facebook_url" value="">
                </div>
                <div class="form-group">
                    <label>Twitter URL</label>
                    <input type="url" name="twitter_url" value="">
                </div>
                <div class="form-group">
                    <label>YouTube URL</label>
                    <input type="url" name="youtube_url" value="">
                </div>
            </div>
        </div>
    </div>

    <!-- Notices & Updates Tab -->
    <div class="tab-content" id="notices">
        <div class="form-section notice-area">
            <h3>Important Notices</h3>
            <div class="form-group">
                <label>Current Notice (Scrolling Text)</label>
                <textarea name="current_notice"
                    rows="3">ðŸš¨ Important Notice: Please check the latest updates!</textarea>
            </div>

        </div>




    </div>

    <div class="action-buttons">
        <button type="button" class="btn btn-secondary" onclick="resetForm()">Reset Changes</button>
        <button type="button" class="btn btn-preview" onclick="previewChanges()">Preview Changes</button>
        <button type="submit" class="btn btn-primary">Save Changes</button>
    </div>
    </form>
    </div>
    </div>

    <script>
        let initialFormState = {};

        function captureInitialState() {
            const form = document.getElementById("websiteForm");
            const formData = new FormData(form);
            initialFormState = {};

            for (let [key, value] of formData.entries()) {
                if (initialFormState[key]) {
                    if (!Array.isArray(initialFormState[key])) {
                        initialFormState[key] = [initialFormState[key]];
                    }
                    initialFormState[key].push(value);
                } else {
                    initialFormState[key] = value;
                }
            }
        }


        // Global variables
        let autoSaveTimer;
        let previewWindow = null;

        // Tab switching functionality
        function showTab(tabName, event) {
            try {
                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });

                // Remove active class from all tab buttons
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });

                // Show selected tab content
                const selectedTab = document.getElementById(tabName);
                if (selectedTab) {
                    selectedTab.classList.add('active');
                }

                // Add active class to clicked button
                if (event && event.target) {
                    event.target.classList.add('active');
                }
            } catch (error) {
                console.error('Tab switching error:', error);
            }
        }

        // Convert number to Roman numerals
        function toRoman(num) {
            const romanNumerals = ['I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX', 'X'];
            return romanNumerals[num - 1] || num.toString();
        }

        // Add ADFM functionality
        function addADFM() {
            try {
                const container = document.getElementById('adfmContainer');
                if (!container) return;

                const adfmCount = container.children.length + 1;
                const newADFM = document.createElement('div');
                newADFM.className = 'staff-member';
                newADFM.innerHTML = `
                    <button type="button" class="remove-staff" onclick="removeStaff(this)">Ã—</button>
                    <h4>ADFM-${toRoman(adfmCount)}</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" name="adfm_name[]" value="">
                        </div>
                        <div class="form-group">
                            <label>Phone</label>
                            <input type="tel" name="adfm_phone[]" value="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="adfm_email[]" value="">
                    </div>
                `;
                container.appendChild(newADFM);
            } catch (error) {
                console.error('Add ADFM error:', error);
            }
        }

        // Add other staff functionality

        // Add website link functionality
        function addWebsiteLink() {
            try {
                const container = document.getElementById('websiteLinksContainer');
                if (!container) return;

                const newLink = document.createElement('div');
                newLink.className = 'website-link';
                newLink.innerHTML = `
                    <input type="text" placeholder="Website Name" value="" name="website_name[]">
                    <input type="url" placeholder="Website URL" value="" name="website_url[]">
                    <button type="button" class="remove-link-btn" onclick="removeWebsiteLink(this)">Remove</button>
                `;
                container.appendChild(newLink);
            } catch (error) {
                console.error('Add website link error:', error);
            }
        }

        // Remove staff functionality
        function removeStaff(button) {
            try {
                if (confirm('Are you sure you want to remove this staff member?')) {
                    button.parentElement.remove();
                }
            } catch (error) {
                console.error('Remove staff error:', error);
            }
        }

        // Remove website link functionality
        function removeWebsiteLink(button) {
            try {
                if (confirm('Are you sure you want to remove this website link?')) {
                    button.parentElement.remove();
                }
            } catch (error) {
                console.error('Remove website link error:', error);
            }
        }

        // Initialize other staff positions
        function initializeOtherStaff() {
            try {
                const positions = ['Sr S.O', 'Sr. ISA', 'SE/IT', 'JE/IT', 'SR. AA/AA', 'SR S.V', 'A.S.V', 'STENO-I', 'JR. A.A', 'STENO-II', 'A/CS/CLERK', 'OAA', 'TADK'];
                const container = document.getElementById('otherStaffContainer');
                if (!container) return;

                positions.forEach(position => {
                    const staffMember = document.createElement('div');
                    staffMember.className = 'staff-member';
                    staffMember.innerHTML = `
                        <button type="button" class="remove-staff" onclick="removeStaff(this)">Ã—</button>
                        <h4>${position}</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Name</label>
                                <input type="text" name="staff_name[]" value="">
                            </div>
                            <div class="form-group">
                                <label>Phone</label>
                                <input type="tel" name="staff_phone[]" value="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" name="staff_email[]" value="">
                        </div>
                    `;
                    container.appendChild(staffMember);
                });
            } catch (error) {
                console.error('Initialize staff error:', error);
            }
        }

        // Form submission
        async function handleFormSubmit(e) {
            e.preventDefault();

            const form = document.getElementById("websiteForm");
            const formData = new FormData(form);
            const changedData = {};

            for (let [key, value] of formData.entries()) {
                const initial = initialFormState[key];

                const hasChanged = Array.isArray(initial)
                    ? !initial.includes(value)
                    : initial !== value;

                if (hasChanged) {
                    if (changedData[key]) {
                        if (!Array.isArray(changedData[key])) {
                            changedData[key] = [changedData[key]];
                        }
                        changedData[key].push(value);
                    } else {
                        changedData[key] = value;
                    }
                }
            }

            if (Object.keys(changedData).length === 0) {
                alert("No changes detected.");
                return;
            }

            try {
                const response = await fetch("/save-form", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(changedData),
                });

                const result = await response.json();

                if (result.success) {
                    document.getElementById("successMessage").style.display = "block";
                    window.scrollTo({ top: 0, behavior: "smooth" });

                    setTimeout(() => {
                        document.getElementById("successMessage").style.display = "none";
                    }, 5000);

                    // Update initial state after successful save
                    captureInitialState();
                } else {
                    alert("Save failed: " + result.error);
                }
            } catch (error) {
                console.error("Save failed:", error);
                alert("Error saving changes.");
            }
        }


        // Reset form
        function resetForm() {
            try {
                if (confirm('Are you sure you want to reset all changes? This will restore the original values.')) {
                    const form = document.getElementById('websiteForm');
                    if (form) {
                        form.reset();
                    }
                }
            } catch (error) {
                console.error('Reset form error:', error);
            }
        }

        // Preview changes
        function previewChanges() {
            try {
                openPreviewWindow();
                updatePreview();
            } catch (error) {
                console.error('Preview error:', error);
                alert('Preview functionality is temporarily unavailable.');
            }
        }

        // Logout functionality
        function logout() {
            try {
                if (confirm('Are you sure you want to logout? Any unsaved changes will be lost.')) {
                    // Clear any stored login data
                    if (typeof (Storage) !== "undefined") {
                        sessionStorage.removeItem('loggedIn');
                    }
                    // Redirect would go here
                    window.location.href = "new.html";
                }
            } catch (error) {
                console.error('Logout error:', error);
            }
        }

        // Auto-save functionality
        function autoSave() {
            try {
                clearTimeout(autoSaveTimer);
                autoSaveTimer = setTimeout(() => {
                    console.log('Auto-saving changes...');
                    // Here you would save the form data
                }, 30000); // Auto-save every 30 seconds
            } catch (error) {
                console.error('Auto-save error:', error);
            }
        }

        // Phone number formatting
        function formatPhoneNumber(input) {
            try {
                let value = input.value.replace(/\D/g, '');
                if (value.length === 10) {
                    value = value.replace(/(\d{4})(\d{3})(\d{3})/, '$1-$2-$3');
                }
                input.value = value;
            } catch (error) {
                console.error('Phone formatting error:', error);
            }
        }

        // Export data functionality
        function exportData() {
            try {
                const form = document.getElementById('websiteForm');
                if (!form) return;

                const formData = new FormData(form);
                const data = {};

                for (let [key, value] of formData.entries()) {
                    if (data[key]) {
                        if (Array.isArray(data[key])) {
                            data[key].push(value);
                        } else {
                            data[key] = [data[key], value];
                        }
                    } else {
                        data[key] = value;
                    }
                }

                const jsonData = JSON.stringify(data, null, 2);
                const blob = new Blob([jsonData], { type: 'application/json' });
                const url = URL.createObjectURL(blob);

                const a = document.createElement('a');
                a.href = url;
                a.download = 'ncr-website-data.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            } catch (error) {
                console.error('Export error:', error);
                alert('Error exporting data. Please try again.');
            }
        }

        // Import data functionality
        function importData() {
            try {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = function (e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function (e) {
                            try {
                                const data = JSON.parse(e.target.result);
                                populateForm(data);
                                alert('Data imported successfully!');
                            } catch (error) {
                                console.error('Import parse error:', error);
                                alert('Error importing data. Please check the file format.');
                            }
                        };
                        reader.readAsText(file);
                    }
                };
                input.click();
            } catch (error) {
                console.error('Import error:', error);
                alert('Error importing data. Please try again.');
            }
        }

        // Populate form with imported data
        function populateForm(data) {
            try {
                Object.keys(data).forEach(key => {
                    const element = document.querySelector(`[name="${key}"]`);
                    if (element) {
                        element.value = data[key];
                    }
                });
            } catch (error) {
                console.error('Populate form error:', error);
            }
        }

        // Open preview window
        function openPreviewWindow() {
            try {
                if (previewWindow && !previewWindow.closed) {
                    previewWindow.focus();
                    return previewWindow;
                }

                previewWindow = window.open('', 'preview', 'width=1200,height=800,scrollbars=yes,resizable=yes');
                previewWindow.document.write(`
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>NCR Website Preview</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            .preview-header { background: #2c3e50; color: white; padding: 20px; margin-bottom: 20px; }
                            .preview-section { margin-bottom: 30px; padding: 20px; border: 1px solid #ddd; }
                            .staff-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
                            .staff-card { border: 1px solid #ddd; padding: 15px; border-radius: 8px; }
                        </style>
                    </head>
                    <body>
                        <div class="preview-header">
                            <h1>Live Preview - North Central Railway</h1>
                            <p>This preview updates in real-time as you make changes</p>
                        </div>
                        <div id="previewContent">Loading...</div>
                    </body>
                    </html>
                `);

                return previewWindow;
            } catch (error) {
                console.error('Preview window error:', error);
                return null;
            }
        }

        // Update preview
        function updatePreview() {
            try {
                if (previewWindow && !previewWindow.closed) {
                    const form = document.getElementById('websiteForm');
                    if (!form) return;

                    const formData = new FormData(form);

                    let previewHTML = `
                <div class="preview-section">
                    <h2>Department Information</h2>
                    <h3>${formData.get('deptTitle') || 'Department Title'}</h3>
                    <p><strong>Division:</strong> ${formData.get('division') || 'Not specified'}</p>
                    <p>${formData.get('deptDescription') || 'No description'}</p>
                </div>
                <div class="preview-section">
                    <h2>Current Notice</h2>
                    <marquee>${formData.get('current_notice') || 'No current notice'}</marquee>
                </div>
            `;

                    const previewContent = previewWindow.document.getElementById('previewContent');
                    if (previewContent) {
                        previewContent.innerHTML = previewHTML;
                    }
                }
            } catch (error) {
                console.error('Update preview error:', error);
            }
        }


        // Add tooltips
        function addTooltips() {
            try {
                const tooltips = {
                    'deptTitle': 'This title will appear on the main page of your website',
                    'current_notice': 'This message will scroll across the top of your website',
                    'emergency_contact': 'This number will be displayed for urgent matters'
                };

                Object.keys(tooltips).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.title = tooltips[id];
                    }
                });
            } catch (error) {
                console.error('Tooltips error:', error);
            }
        }

        // Character counter for textareas
        function addCharacterCounters() {
            try {
                document.querySelectorAll('textarea').forEach(textarea => {
                    const counter = document.createElement('div');
                    counter.style.cssText = 'font-size: 12px; color: #666; text-align: right; margin-top: 5px;';
                    textarea.parentNode.appendChild(counter);

                    function updateCounter() {
                        const maxLength = textarea.getAttribute('maxlength') || 1000;
                        const currentLength = textarea.value.length;
                        counter.textContent = `${currentLength}/${maxLength} characters`;

                        if (currentLength > maxLength * 0.9) {
                            counter.style.color = '#e74c3c';
                        } else {
                            counter.style.color = '#666';
                        }
                    }

                    textarea.addEventListener('input', updateCounter);
                    updateCounter();
                });
            } catch (error) {
                console.error('Character counter error:', error);
            }
        }

        // Initialize the application
        function initializeApp() {
            try {
                // Initialize other staff positions
                initializeOtherStaff();

                // Add tooltips
                addTooltips();

                // Add character counters
                addCharacterCounters();

                // Setup form submission
                const form = document.getElementById('websiteForm');
                if (form) {
                    form.addEventListener('submit', handleFormSubmit);
                }

                // Add phone formatting to all phone inputs
                document.querySelectorAll('input[type="tel"]').forEach(input => {
                    input.addEventListener('input', function () {
                        formatPhoneNumber(this);
                    });
                });

                // Add auto-save to all form inputs
                document.querySelectorAll('input, textarea, select').forEach(element => {
                    element.addEventListener('input', autoSave);
                    element.addEventListener('change', autoSave);
                });

                // Add keyboard shortcuts
                document.addEventListener('keydown', function (e) {
                    if (e.ctrlKey || e.metaKey) {
                        switch (e.key) {
                            case 's': // Ctrl+S to save
                                e.preventDefault();
                                const form = document.getElementById('websiteForm');
                                if (form) {
                                    form.dispatchEvent(new Event('submit'));
                                }
                                break;
                            case 'p': // Ctrl+P to preview
                                e.preventDefault();
                                previewChanges();
                                break;
                        }
                    }
                });

                // Update preview when form changes (debounced)
                let previewUpdateTimer;
                document.addEventListener('input', function () {
                    clearTimeout(previewUpdateTimer);
                    previewUpdateTimer = setTimeout(updatePreview, 500);
                });

                console.log('Application initialized successfully');
            } catch (error) {
                console.error('Initialization error:', error);
            }
            captureInitialState();

        }

        // Start the application when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }

        // Handle page unload
        window.addEventListener('beforeunload', function (e) {
            try {
                if (previewWindow && !previewWindow.closed) {
                    previewWindow.close();
                }
            } catch (error) {
                console.error('Page unload error:', error);
            }
        });
        function addSSOMember(name = '') {
            const container = document.getElementById('ssoMembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `
            <input type="text" name="sso_members" value="${name}" placeholder="Member Name" />
        `;
            container.appendChild(div);
        }

        function addISOMember(name = '') {
            const container = document.getElementById('isoMembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `
            <input type="text" name="iso_members" value="${name}" placeholder="Member Name" />
        `;
            container.appendChild(div);
        }
        function addSEMember(name = '') {
            const container = document.getElementById('seMembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `
            <input type="text" name="se_members" value="${name}" placeholder="Member Name" />
        `;
            container.appendChild(div);
        }


        function addJEMember(name = '') {
            const container = document.getElementById('jeMembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `
    <input type="text" name="je_members" value="${name}" placeholder="Member Name" />
  `;
            container.appendChild(div);
        }
        function addAAMember(name = '') {
            const container = document.getElementById('aaMembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `
    <input type="text" name="aa_members" value="${name}" placeholder="Member Name" />
  `;
            container.appendChild(div);
        }
        function addSVMember(name = '') {
            const container = document.getElementById('svMembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `
    <input type="text" name="sv_members" value="${name}" placeholder="Member Name" />
  `;
            container.appendChild(div);
        }

        function addASVMember(name = '') {
            const container = document.getElementById('asvMembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `
    <input type="text" name="asv_members" value="${name}" placeholder="Member Name" />
  `;
            container.appendChild(div);
        }

        function addSteno1Member(name = '') {
            const container = document.getElementById('steno1MembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `
    <input type="text" name="steno1_members" value="${name}" placeholder="Member Name" />
  `;
            container.appendChild(div);
        }
        function addSteno2Member(name = '') {
            const container = document.getElementById('steno2MembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `<input type="text" name="steno2_members" value="${name}" placeholder="Member Name" />`;
            container.appendChild(div);
        }

        if (data.steno2_members) {
            const members = Array.isArray(data.steno2_members) ? data.steno2_members : [data.steno2_members];
            members.forEach(name => addSteno2Member(name));
        }

        const steno2MemberInputs = document.querySelectorAll('input[name="steno2_members"]');
        const steno2Members = Array.from(steno2MemberInputs).map(input => input.value.trim()).filter(Boolean);
        if (steno2Members.length > 0) {
            changedData["steno2_members"] = steno2Members;
        }

        function addJRAAMember(name = '') {
            const container = document.getElementById('jraaMembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `<input type="text" name="jraa_members" value="${name}" placeholder="Member Name" />`;
            container.appendChild(div);
        }

        if (data.jraa_members) {
            const members = Array.isArray(data.jraa_members) ? data.jraa_members : [data.jraa_members];
            members.forEach(name => addJRAAMember(name));
        }

        const jraaMemberInputs = document.querySelectorAll('input[name="jraa_members"]');
        const jraaMembers = Array.from(jraaMemberInputs).map(input => input.value.trim()).filter(Boolean);
        if (jraaMembers.length > 0) {
            changedData["jraa_members"] = jraaMembers;
        }
        function addTADKMember(name = '') {
            const container = document.getElementById('tadkMembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `<input type="text" name="tadk_members" value="${name}" placeholder="Member Name" />`;
            container.appendChild(div);
        }
        function addOAAMember(name = '') {
            const container = document.getElementById('oaaMembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `<input type="text" name="oaa_members" value="${name}" placeholder="Member Name" />`;
            container.appendChild(div);
        }
        function addClerkMember(name = '') {
            const container = document.getElementById('clerkMembersContainer');
            const div = document.createElement('div');
            div.className = 'form-group';
            div.innerHTML = `<input type="text" name="clerk_members" value="${name}" placeholder="Member Name" />`;
            container.appendChild(div);
        }


    </script>



</body>

</html>